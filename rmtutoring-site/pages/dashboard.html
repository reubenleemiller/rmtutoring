<!DOCTYPE html>
<html lang="en" class="preloader-lock">
<head>
  <script>
    document.documentElement.classList.add('preloader-lock');
  </script>
  <script type="module">
    // load the videos from the api
    import { listVideos, listBookings} from '../scripts/dashboard.js';
    const email = localStorage.getItem("email");
    listVideos(email);
    listBookings(email);
  </script>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Your Sessions</title>
  <link href="../style.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body class="locked">
  <div id="site-preloader" class="">
    <div class="preloader-spinner-wrapper">
      <div class="custom-spinner"><div></div></div>
      <img src="../assets/logo.png" alt="RM Tutoring Services Logo" class="preloader-logo" />
    </div>
  </div>

  <header class="sticky">
    <a href="../index.html"><img alt="RM Tutoring Services Logo" class="logo" src="../assets/logo.png"/></a>
    <button class="hamburger" onclick="toggleMenu()" data-ignore-preloader>☰</button>
    <nav id="nav-menu">
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="https://book.rmtutoringservices.com/reubenleemiller">Scheduling</a></li>
        <li><a href="https://packages.rmtutoringservices.com">Packages</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a id="login-link" href="login.html">Login</a></li>
        <script type="module">
          import { handleLoginLink } from '../scripts/auth-ui.js'; // adjust path as needed

          window.addEventListener("DOMContentLoaded", () => {
            handleLoginLink();
          });
        </script>
      </ul>
    </nav>
  </header>

  <main>
    <div class="user-greeting" id="user-greeting"></div>
    <section id="user-videos" class="content">
      <h3>Your Sessions</h3>
    </section>

    <section id="bookings" class="content">
      <div class="table-container">
        <table id="schedule-table">
          <caption>Daily Schedule</caption>
          <thead>
            <tr>
              <th>Description</th>
              <th>Start Time</th>
              <th>End Time</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
      <!-- Rows will be inserted here by JavaScript -->
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <script type="module" src="../scripts/dashboard.js"></script>

  <script type="module">
    import { displayUserGreeting } from '../scripts/dashboard.js';
    console.log
    displayUserGreeting();
  </script>
  <div style="display: flex; justify-content: center; margin: 2rem 0;">
    <button id="delete-account-button"> Delete my account </button>
  </div>

  <script type="module">
    import { deleteAccount } from '../scripts/dashboard.js';
    document.getElementById('delete-account-button').addEventListener('click', () => {
      if (confirm("Are you sure you want to delete your account? This action cannot be undone.")) {
        deleteAccount();
      }
    });
  </script>

  <footer class="footer-flex">
    <div class="footer-links">
      <p>© 2025 RM Tutoring Services.</p>
      <a href="../index.html">Home</a>
      <a href="about.html">About</a>
      <a href="terms-of-service.html">Terms of Service</a>
      <a href="privacy-policy.html">Privacy Policy</a>
      <a href="refund-policy.html">Refund Policy</a>
      <a href="contact.html">Contact</a>
      <a id="dashboard-link"></a>
      <div class="footer-payment-icons">
        <i class="fab fa-cc-visa"></i>
        <i class="fab fa-cc-mastercard"></i>
        <i class="fab fa-cc-stripe"></i>
      </div>
    </div>
    <div class="footer-links">
      <p>Book and Pay for Sessions or Packages</p>
      <a class="calcom-button" data-cal-link="reubenleemiller/60min" data-cal-namespace="60min" data-cal-config='{"layout":"month_view"}'>60-min Sessions</a>
      <a class="calcom-button" data-cal-link="reubenleemiller/90min" data-cal-namespace="90min" data-cal-config='{"layout":"month_view"}'>90-min Sessions</a>
      <a class="calcom-button" data-cal-link="reubenleemiller/120min" data-cal-namespace="120min" data-cal-config='{"layout":"month_view"}'>120-min Sessions</a>
      <a href="https://packages.rmtutoringservices.com/">Packages</a>
      <a href="https://buy.rmtutoringservices.com/p/login/9B6fZggzp4rJfma1tN5Rm00">Manage Subscription</a>
    </div>
  </footer>

  <script src="../scripts/preloader.js"></script>
  <script>
    function toggleMenu() {
      const nav = document.getElementById("nav-menu");
      nav.classList.toggle("open");
    }
  </script>
</body>
</html>
